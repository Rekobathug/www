<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Events</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="layout.css" type="text/css"/>
        <script src="functions.js"></script>
        <script>
            window.onload = get_events("ALL");

            var evtID, evtName, evtDescription, evtDate, evtTime, evtClub, evtLocation, evtAddress, evtPostcode, evtPrice, evtImage;
            var evtPromoters = [];
            var evtTables = [];
            var perm_evtPromoters = [];
            var form1 = ['eventname', 'event-description', 'date-of-event', 'time', 'club', 'location', 'address-1', 'address-2', 'post-code', 'price'];
            var form_table = ['tablename', 'tablenumber', 'tableprice'];
            var form_e_table = ['e_tablename', 'e_tablenumber', 'e_tableprice'];
            var form3 = ['eventimage'];
            var form_preview = ['p_eventname', 'p_description', 'p_date', 'p_time', 'p_club', 'p_location', 'p_address', 'p_postcode', 'p_price', 'p_promoters'];
            var form_edit = ['e_eventname', 'e_description', 'e_date-of-event', 'e_time', 'e_club', 'e_location', 'e_address', 'e_postcode', 'e_price'];
            var messages_create = ['create-response1', 'create-response2', 'create-response3', 'create-response4'];
            var messages_update = ['edit_promoters', 'edit-response', 'e_promoters', 'edit_promoters', 'update_image_message'];
            // create event functions
            function add_event() {
                var request = new XMLHttpRequest();
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    //Check HTTP status code
                    if (request.status === 200) {
                        //Get data from server
                        var responseData = request.responseText;
                        alert(responseData);
                        document.getElementById("create-response4").innerHTML = responseData;
                        message_box(responseData);
                        if (responseData === "Event Created") {
                            document.getElementById('preview_submit').style.display = 'none';
                            document.getElementById('preview_previous').style.display = 'none';
                        }

                    } else
                        alert("Error communicating with server: " + request.status);
                };
                //Set up request with HTTP method and URL 
                request.open("POST", "PHP_Org/add_event.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                var tables = JSON.stringify(evtTables);
                alert(tables);
                //Send request
                request.send("eventname=" + evtName +
                        "&description=" + evtDescription +
                        "&date-of-event=" + evtDate +
                        "&time=" + evtTime +
                        "&club=" + evtClub +
                        "&location=" + evtLocation +
                        "&address=" + evtAddress +
                        "&postcode=" + evtPostcode +
                        "&price=" + evtPrice +
                        "&tables=" + tables +
                        "&promoters=" + JSON.stringify(evtPromoters));

            }
            function form_1() {

                var val = validation_form(form1, 'create-response1');

                if (val) {

                    evtName = document.getElementById('eventname').value;
                    evtDescription = document.getElementById('event-description').value;
                    evtDate = document.getElementById('date-of-event').value;
                    evtTime = document.getElementById('time').value;
                    evtClub = document.getElementById('club').value;
                    evtLocation = document.getElementById('location').value;
                    evtAddress = document.getElementById('address-1').value + document.getElementById('address-2').value;
                    evtPostcode = document.getElementById('post-code').value;
                    evtPrice = document.getElementById('price').value;

                    visibility(['create_2', 'create_1']);
                }

            }


            function add_table(fields, message, button, check) {
                var val = validation_form(fields, check);

                if (val) {
                    var name, number, price;

                    name = document.getElementById(fields[0]).value;
                    number = document.getElementById(fields[1]).value;
                    price = document.getElementById(fields[2]).value;

                    var obj = {name: name, number: number, price: price};
                    evtTables.push(obj);
                    alert(evtTables.toString());
                    document.getElementById(message).innerHTML = "";
                    for (var i = 0; i < evtTables.length; i++) {
                        var table = evtTables[i];
                        document.getElementById(message).innerHTML += i + 1 + " - Table name : " + table['name'] + " - Number of tables : " + table['number'] + " - Price : " + table['price'] + '<button onclick="del_table(' + i + ',\'' + message + '\');">X</button> <br>';
                    }
                    form_table.forEach(empty_input);
                    document.getElementById(button).disabled = true;
                    alert(JSON.stringify(evtTables));
                }
            }
            function del_table(index, message) {
                evtTables.splice(index, 1);
                document.getElementById(message).innerHTML = "";
                if (evtTables.length > 0) {
                    for (var i = 0; i < evtTables.length; i++) {
                        var table = evtTables[i];
                        document.getElementById(message).innerHTML += i + 1 + " - Table name : " + table['name'] + " - Number of tables : " + table['number'] + " - Price : " + table['price'] + '<button onclick="del_table(' + i + ',\'' + message + '\');">X</button> <br>';
                    }
                } else {
                    document.getElementById(message).innerHTML = "No Tables added";
                }
            }




            function add_promoter(field, message, button) {
                var val = validation_form([field], message);

                if (val) {
                    evtPromoters.push(document.getElementById(field).value);
                    document.getElementById(field).value = "";
                    document.getElementById(message).innerHTML = "";
                    for (var i = 0; i < evtPromoters.length; i++) {
                        document.getElementById(message).innerHTML += i + 1 + " - " + evtPromoters[i] + '<button onclick="del_promoter(' + i + ',\'' + message + '\');">X</button> <br>';
                    }
                    alert(message);
                    document.getElementById(button).disabled = true;

                }

            }
            function del_promoter(index, message) {
                alert(message);
                evtPromoters.splice(index, 1);
                document.getElementById(message).innerHTML = "";
                if (evtPromoters.length > 0) {
                    for (var i = 0; i < evtPromoters.length; i++) {
                        document.getElementById(message).innerHTML += i + 1 + " - " + evtPromoters[i] + '<button onclick="del_promoter(' + i + ',' + message + ');">X</button> <br>';
                    }
                } else {
                    document.getElementById(message).innerHTML = "No Promoters added";
                }
            }
            function form_2() {
                var val = validation_form(form3, 'create-response3');
                evtImage = document.getElementById('eventimage');

                if (!evtImage.files[0].name.match(/.(jpg|jpeg|png|gif)$/i)) {

                    alert('not an image');
                    val = false;
                }

                if (val) {
                    visibility(['create_5', 'create_4']);
                    document.getElementById('p_eventname').innerHTML = evtName;
                    document.getElementById('p_description').innerHTML = evtDescription;
                    document.getElementById('p_date').innerHTML = evtDate;
                    document.getElementById('p_time').innerHTML = evtTime;
                    document.getElementById('p_club').innerHTML = evtClub;
                    document.getElementById('p_location').innerHTML = evtLocation;
                    document.getElementById('p_address').innerHTML = evtAddress;
                    document.getElementById('p_postcode').innerHTML = evtPostcode;
                    document.getElementById('p_price').innerHTML = evtPrice;
                    document.getElementById('p_tables').innerHTML = "";
                    document.getElementById('p_promoters').innerHTML = "";

                    if (evtTables.length > 0) {
                        for (var i = 0; i < evtTables.length; i++) {
                            var table = evtTables[i];
                            document.getElementById('p_tables').innerHTML += i + 1 + " - Table name : " + table['name'] + " - Number of tables : " + table['number'] + " - Price : " + table['price'] + '<button onclick="del_table(' + i + ');">X</button> <br>';
                        }
                    } else {
                        document.getElementById('tables').innerHTML = "No Tables added";
                    }
                    if (evtPromoters.length > 0) {
                        for (var i = 0; i < evtPromoters.length; i++) {
                            document.getElementById('p_promoters').innerHTML += i + 1 + " - " + evtPromoters[i];
                        }
                    } else {
                        document.getElementById('p_promoters').innerHTML = "No Promoters added";
                    }
                    evtImage = document.getElementById('eventimage').value;
                    evtImage = evtImage.replace(/.*[\/\\]/, '');
                    var image = "PHP_Org/Orgs/" + localStorage["orgID"] + "/Temp-events-images/" + evtImage;
                    alert(image);
                    document.getElementById('p_eventimage').src = image;

                    document.getElementById('preview_submit').style.display = 'block';
                    document.getElementById('preview_previous').style.display = 'block';
                } else {
                    document.getElementById('create-response3').innerHTML = "Select a Image to Upload";
                }

            }
            function clean_create_inputs() {
                form1.forEach(empty_input);
                ['promoter'].forEach(empty_input);
                form3.forEach(empty_input);
                form_preview.forEach(empty_text);
                messages_create.forEach(empty_text);
                evtID = evtName = evtDescription = evtDate = evtTime = evtClub = evtLocation = evtAddress = evtPostcode = evtPrice = evtImage = null;
                evtPromoters = [];
                visibility(['create_1', 'create_4']);
                document.getElementById('p_eventimage').src = "";
                get_events("ALL");
                var iframe = document.getElementById("view_imageToUpload");
                var html = "";

                iframe.contentWindow.document.open();
                iframe.contentWindow.document.write(html);
                iframe.contentWindow.document.close();

            }

            //edit event functions

            function get_events(eventname) {
                var request = new XMLHttpRequest();
                var all_events, event;
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    if (request.status === 200) {
                        alert(request.responseText);
                        all_events = JSON.parse(request.responseText);

                        // Find a <table> element with id="myTable":
                        var table = document.getElementById("table-events");
                        while (table.rows.length > 1) {
                            table.deleteRow(1);
                        }
                        for (var i = 0; i < all_events.length; i++) {
                            event = all_events[i];
                            var row = table.insertRow();
                            var cell1 = row.insertCell(0);
                            var cell2 = row.insertCell(1);
                            cell1.innerHTML = event['eventname'];
                            cell2.innerHTML = event['dateofevent'];
                            row.setAttribute("onclick", "get_event_details(" + event['idevent'] + ");");
                        }
                    } else {
                        alert("Error communicating with server: " + request.status);
                    }
                };
                //Set up and send request
                request.open("POST", "PHP_Org/get_events.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.send("eventname=" + eventname);
            }

            function get_event_details(id) {
                alert("events : " + id);
                var request = new XMLHttpRequest();
                var event;
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    if (request.status === 200) {
                        alert(request.responseText);
                        event = JSON.parse(request.responseText);
                        if (event.hasOwnProperty("message")) {
                            document.getElementById("message").innerHTML = event["message"];
                        } else {
                            evtID = id;
                            document.getElementById('e_eventname').value = event['eventname'];
                            document.getElementById('e_description').value = event['description'];
                            document.getElementById('e_date-of-event').value = event['dateofevent'];
                            document.getElementById('e_time').value = event['time'];
                            document.getElementById('e_club').value = event['club'];
                            document.getElementById('e_location').value = event['location'];
                            document.getElementById('e_address').value = event['address'];
                            document.getElementById('e_postcode').value = event['postcode'];
                            document.getElementById('e_price').value = event['price'];
                            document.getElementById('e_image').src = "PHP_Org/" + event['picture'];
                            get_event_promoters(id);
                            get_event_tables(id);
                            visibility(['edit-event', 'check-events']);
                        }
                    } else {
                        alert("Error communicating with server: " + request.status);
                    }
                };
                //Set up and send request
                request.open("POST", "PHP_Org/get_event_details.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.send("idevent=" + id);
            }

            function get_event_promoters(id) {
                var request = new XMLHttpRequest();
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    if (request.status === 200) {
                        alert(request.responseText);
                        evtPromoters = JSON.parse(request.responseText);
                        perm_evtPromoters = evtPromoters;
                        if (evtPromoters.hasOwnProperty("message")) {
                            document.getElementById("edit_promoters").innerHTML = evtPromoters["message"];

                        } else {
                            document.getElementById('e_promoters').innerHTML = "";
                            document.getElementById('edit_promoters').innerHTML = "";
                            for (var i = 0; i < evtPromoters.length; i++) {
                                document.getElementById('e_promoters').innerHTML += i + 1 + " - " + evtPromoters[i] + "<br>";
                            }
                            for (var i = 0; i < evtPromoters.length; i++) {
                                document.getElementById('edit_promoters').innerHTML += i + 1 + " - " + evtPromoters[i] + '<button onclick="del_promoter(' + i + ',\'edit_promoters\')">X</button> <br>';
                            }
                        }
                    } else {
                        alert("Error communicating with server: " + request.status);
                    }
                };
                //Set up and send request
                request.open("POST", "PHP_Org/get_event_promoters.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.send("idevent=" + id);
            }
            function get_event_tables(id) {
                var request = new XMLHttpRequest();
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    if (request.status === 200) {
                        alert(request.responseText);
                        evtTables = JSON.parse(request.responseText);
                        perm_evtTables = evtTables;
                        if (evtPromoters.hasOwnProperty("message")) {
                            document.getElementById("edit-table-message").innerHTML = evtTables["message"];

                        } else {
                            document.getElementById("e_tables").innerHTML = "";
                            for (var i = 0; i < evtTables.length; i++) {
                                var table = evtTables[i];
                                document.getElementById("e_tables").innerHTML += i + 1 + " - Table name : " + table['name'] + " - Number of tables : " + table['number'] + " - Price : " + table['price'] + '<button onclick="del_table(' + i + ',\'e_tables\');">X</button> <br>';
                            }
                        }
                    } else {
                        alert("Error communicating with server: " + request.status);
                    }
                };
                //Set up and send request
                request.open("POST", "PHP_Org/get_event_tables.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.send("idevent=" + id);
            }


            function update_event_promoters() {
                var request = new XMLHttpRequest();
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    //Check HTTP status code
                    if (request.status === 200) {
                        //Get data from server
                        var responseData = request.responseText;
                        document.getElementById("edit_promoters").innerHTML = responseData;
                        if (responseData === "Details saved") {
                            visibility(['edit-menu', 'edit-promoters']);
                            get_event_promoters(evtID);
                        }
                    } else
                        alert("Error communicating with server: " + request.status);
                };
                //Set up request with HTTP method and URL 
                request.open("POST", "PHP_Org/update_event_promoters.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                //Send request
                request.send("idevent=" + evtID +
                        "&promoters=" + JSON.stringify(evtPromoters));
            }
            
            function update_event_tables() {
                var request = new XMLHttpRequest();
                //Create event handler that specifies what should happen when server responds
                request.onload = function () {
                    //Check HTTP status code
                    if (request.status === 200) {
                        //Get data from server
                        var responseData = request.responseText;
                        document.getElementById("edit-table-message").innerHTML = responseData;
                        if (responseData === "Details saved") {
                            get_event_tables(evtID);
                        }
                    } else
                        alert("Error communicating with server: " + request.status);
                };
                //Set up request with HTTP method and URL 
                request.open("POST", "PHP_Org/update_event_tables.php");
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                var tables = JSON.stringify(evtTables);
                alert(tables);

                //Send request
                request.send("idevent=" + evtID +
                        "&tables=" + tables);
            }
            function update_event_image() {
                var val = validation_form(['new-eventimage'], 'update_image_message');
                evtImage = document.getElementById('new-eventimage');

                if (!evtImage.files[0].name.match(/.(jpg|jpeg|png|gif)$/i)) {

                    alert('not an image');
                    val = false;
                }
                if (val) {
                    var request = new XMLHttpRequest();
                    //Create event handler that specifies what should happen when server responds
                    request.onload = function () {
                        //Check HTTP status code
                        if (request.status === 200) {
                            //Get data from server
                            var responseData = request.responseText;
                            document.getElementById("update_image_message").innerHTML = responseData;
                            ['save_image'].forEach(disabel_input);
                            get_event_details(evtID);
                        } else
                            alert("Error communicating with server: " + request.status);
                    };


                    //Set up request with HTTP method and URL 
                    request.open("POST", "PHP_Org/update_event_image.php");
                    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                    //Send request
                    request.send("idevent=" + evtID);
                } else {
                    document.getElementById("update_image_message").innerHTML = "Error uploading Image";
                }
            }
            function update_event_details() {

                var val = validation_form(form_edit, 'edit-response');
                if (val) {


                    var request = new XMLHttpRequest();
                    //Create event handler that specifies what should happen when server responds
                    request.onload = function () {
                        //Check HTTP status code
                        if (request.status === 200) {
                            //Get data from server
                            var responseData = request.responseText;
                            alert(responseData);
                            document.getElementById("edit-response").innerHTML = responseData;
                            message_box(responseData);
                            disable_edit_details();

                        } else
                            alert("Error communicating with server: " + request.status);
                    };

                    evtName = document.getElementById('e_eventname').value;
                    evtDescription = document.getElementById('e_description').value;
                    evtDate = document.getElementById('e_date-of-event').value;
                    evtTime = document.getElementById('e_time').value;
                    evtClub = document.getElementById('e_club').value;
                    evtLocation = document.getElementById('e_location').value;
                    evtAddress = document.getElementById('e_address').value;
                    evtPostcode = document.getElementById('e_postcode').value;
                    evtPrice = document.getElementById('e_price').value;

                    //Set up request with HTTP method and URL 
                    request.open("POST", "PHP_Org/update_event.php");
                    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                    //Send request
                    request.send("idevent=" + evtID +
                            "&eventname=" + evtName +
                            "&description=" + evtDescription +
                            "&date-of-event=" + evtDate +
                            "&time=" + evtTime +
                            "&club=" + evtClub +
                            "&location=" + evtLocation +
                            "&address=" + evtAddress +
                            "&postcode=" + evtPostcode +
                            "&price=" + evtPrice);
                }
            }

            function enable_edit_details() {
                form_edit.forEach(enabel_input);
                ['edit_details'].forEach(disabel_input);
                ['update_details'].forEach(enabel_input);
            }
            function disable_edit_details() {

                form_edit.forEach(disabel_input);
                ['update_details'].forEach(disabel_input);
                ['edit_details'].forEach(enabel_input);
            }

            function clean_update_inputs() {
                form_edit.forEach(empty_input);
                disable_edit_details();
                messages_update.forEach(empty_text);
                evtID = evtName = evtDescription = evtDate = evtTime = evtClub = evtLocation = evtAddress = evtPostcode = evtPrice = evtImage = null;
                evtPromoters = [];
                visibility(['check-events', 'edit-event']);
                document.getElementById('e_image').src = "";
                get_events("ALL");
                var iframe = document.getElementById("new_view_imageToUpload");
                var html = "";
                iframe.contentWindow.document.open();
                iframe.contentWindow.document.write(html);
                iframe.contentWindow.document.close();
            }

            function search_event() {
                var text = document.getElementById("eventsearch").value;
                if (text === "") {
                    get_events('ALL');
                } else {
                    get_events(text);
                }
            }

        </script>
    </head>
    <body>
    <center>

        <div id="org-events" style="width:88%; float: right; border: 1px solid black; height: 800px;">

            <div  id="check-events" style="height: auto;">
                <a   onclick="visibility(['create-events', 'check-events']);" style="float:left;">Create Event</a>
                <input type="search" class="search" id="eventsearch" oninput="search_event();" placeholder="Search for events.." title="Type in a name"> 
                <br><br>

                <div style="width: 70%; height:600px; overflow:scroll;">

                    <span id="msgevents"></span>
                    <table id="table-events">
                        <tr class="header" >
                            <th style="width:50%;">Name</th>
                            <th style="width:40%;">Date</th>
                        </tr>
                    </table>
                </div>
            </div>

            <div id="edit-event"  style=" float: right; border: 1px solid black; display:none;">

                <a onclick="clean_update_inputs();" style="float:left;">Back</a><br><br><br><br><br><br>
                <div id='menu'>
                    <div id='edit-details' style="float:left; width: 49%; height: 580px">
                        <span id='edit-response'>Click edit do change details</span><br>
                        <br><strong>
                            Event name:
                            <input type="text"  name="eventname" id="e_eventname" disabled required>
                            <br><br>
                            Event description:<br>
                            <textarea rows="4" cols="50" name="event-description" id="e_description" disabled required></textarea>
                            <br><br>
                            Date:
                            <input type="date" name="date-of-event" id="e_date-of-event" disabled required>
                            Select a time:
                            <input type="time" name="time" id="e_time" disabled>
                            <br><br>
                            Club:
                            <input type="text"  name="club" id="e_club" disabled required>
                            Location:
                            <input type="text"  name="location" id="e_location" disabled required>
                            <br><br>
                            <br><br>
                            Address:
                            <input type="text"  name="Address line 1" id="e_address" disabled required>
                            <br><br>
                            Post-code:<br>
                            <input type="text"  name="post-code" id="e_postcode" style="width: 60px;" disabled required>
                            <br><br>
                            Price:<br>
                            <input type="number" name="price" id="e_price" oninput="validate_numbers('e_price')" disabled required>

                            <br><br>
                            <button onclick="visibility(['edit-table', 'menu']);">Tables</button><br>
                        </strong><br><br>
                        <button id="edit_details"  onclick="enable_edit_details()">Edit</button><button id="update_details"  onclick="update_event_details();" disabled>Save</button>
                    </div>
                    <div id='edit-menu' style="float:right; width: 49%; height: 580px">
                        <img alt="org image" id="e_image" src="images/txilo.jpg" width="250"><br>
                        <button onclick="visibility(['edit-image', 'menu']);">Change</button><br><br>
                        <a  onclick="visibility(['edit-promoters', 'menu']);">Promoters</a>
                        <span id="e_promoters"></span><br><br>
                    </div>
                </div>

                <div id='edit-table' style="height: 580px; display: none;">
                    <h4>Tables</h4>
                    Table name:
                    <input type="text"  name="tablename" id="e_tablename" oninput="button_val(form_e_table, 'e_button-table')"  required>
                    <br><br>
                    Number of tables:
                    <input type="number" name="number of tables" id="e_tablenumber" oninput="button_val(form_e_table, 'e_button-table')" required>
                    <br><br>
                    Price:
                    <input type="number"  name="table price" id="e_tableprice" oninput="button_val(form_e_table, 'e_button-table')" required>
                    <br><br>
                    <button onclick="add_table(form_e_table, 'e_tables', 'e_button-table', 'edit-table-message');" id='e_button-table' disabled>Add Table</button><br><br><br>
                    <span id='e_tables'>No Tables added</span><br><br>
                    <span id='edit-table-message'></span><br><br>
                    <button onclick="update_event_tables()" >Save</button>
                    <a  onclick="visibility(['menu', 'edit-table']);" style="float:right;">back</a>
                </div>

                <div id='edit-promoters' style="height: 580px;display: none;">
                    Promoter name:
                    <input type="text"  name="eventname" id="add_promoter" oninput="button_val(['add_promoter'], 'add_button-promoter')" required>
                    <br><br>
                    <button onclick="add_promoter('add_promoter', 'edit_promoters', 'add_button-promoter');" id='add_button-promoter' disabled>Add promoter</button><br><br><br>
                    <span id="edit_promoters"></span><br><br>
                    <button id="update_promoters" onclick="update_event_promoters();">save</button>

                    <a href="#" onclick="visibility(['menu', 'edit-promoters']);">Cancel</a>
                </div>
                <div id='edit-image' style=" height: 580px;display: none;">
                    <form action="PHP_Org/upload_event_image.php" method="post" enctype="multipart/form-data" target="new_view_imageToUpload">
                        Select image to upload:
                        <input type="file" name="imageToUpload" id="new-eventimage">
                        <input type="submit" value="Upload Image" onclick="['save_image'].forEach(enabel_input);" name="submit">
                    </form> 
                    <iframe style="width: 390px; height: 300px;" id="new_view_imageToUpload" name="new_view_imageToUpload"></iframe>
                    <span id="update_image_message"></span><br>
                    <button id="save_image" onclick="update_event_image();" disabled>Save</button><br><br>
                    <a href="#" onclick="visibility(['menu', 'edit-image']);">Back</a>
                </div>
            </div>
            <div  id="create-events" style="height: auto; display: none;">

                <a  onclick="visibility(['check-events', 'create-events']);
                        clean_create_inputs();" style="float:left;">Back</a> <br><br><br><br>
                <!-- box 1-->
                <div id="create_1" style="height: 620px" >
                    <h4>Details</h4>
                    <form>
                        <br><strong>
                            Event name:
                            <input type="text"  name="eventname" id="eventname" required>
                            <br><br>
                            Event description:<br>
                            <textarea rows="4" cols="50" name="event-description" id="event-description" required></textarea>
                            <br><br>
                            Date:
                            <input type="date" name="date-of-event" id="date-of-event" required>
                            Select a time:
                            <input type="time" name="time" id="time">
                            <br><br>
                            Club:
                            <input type="text"  name="club" id="club" required>
                            Location:
                            <input type="text"  name="location" id="location" required>
                            <br><br>
                            <br><br>
                            Address:
                            <input type="text"  name="Address line 1" id="address-1" required>
                            <br>
                            <input type="text"  name="Address line 2" id="address-2" required>
                            <br><br>
                            Post-code:<br>
                            <input type="text"  name="post-code" id="post-code" style="width: 60px;" required>
                            <br><br>
                            Price:<br>
                            <input type="number" name="price" id="price" oninput="validate_numbers('price')" required>
                            <br><br>
                        </strong>
                    </form>
                    <span id='create-response1'></span><br><br>
                    <a onclick="form_1()" style="float:right;">Next</a>
                </div>

                <!-- box 2-->
                <div id="create_2" style="display:none; height: 620px" >
                    <h4>Tables</h4>
                    Table name:
                    <input type="text"  name="tablename" id="tablename" oninput="button_val(form_table, 'button-table')"  required>
                    <br><br>
                    Number of tables:
                    <input type="number" name="number of tables" id="tablenumber" oninput="button_val(form_table, 'button-table')" required>
                    <br><br>
                    Price:
                    <input type="number"  name="table price" id="tableprice" oninput="button_val(form_table, 'button-table')" required>
                    <br><br>
                    <button onclick="add_table(form_table, 'tables', 'button-table', 'create-response2');" id='button-table' disabled>Add Table</button><br><br><br>
                    <span id='tables'>No Tables added</span><br><br>
                    <span id='create-response2'></span><br><br>
                    <a onclick="visibility(['create_1', 'create_2']);" style="float:left;">Previous</a>
                    <a  onclick="visibility(['create_3', 'create_2']);" style="float:right;">Next</a>
                </div>
                <!-- box 2-->
                <div id="create_3" style="display:none; height: 620px" >
                    <h4>Promoters</h4>
                    Promoter name:
                    <input type="text"  name="eventname" id="promoter" oninput="button_val(['promoter'], 'button-promoter')" required>
                    <br><br>
                    <button onclick="add_promoter('promoter', 'create-response3', 'button-promoter')" id='button-promoter' disabled>Add promoter</button><br><br><br>

                    <span id='create-response3'>No Promoters added</span><br><br>
                    <a onclick="visibility(['create_2', 'create_3']);" style="float:left;">Previous</a>
                    <a  onclick="visibility(['create_4', 'create_3']);" style="float:right;">Next</a>
                </div>

                <!-- box 3-->
                <div id="create_4" style="display:none; height: 620px ">
                    <h4>Flyer</h4>
                    <div style="width: 400px; height: 400px;  border: 7px solid black;">
                        <form action="PHP_Org/upload_event_image.php" method="post" enctype="multipart/form-data" target="view_imageToUpload">
                            Select image to upload:
                            <input type="file" name="imageToUpload" id="eventimage">
                            <input type="submit" value="Upload Image" name="submit">
                        </form> 
                        <iframe style="width: 390px; height: 300px;" id="view_imageToUpload" name="view_imageToUpload"></iframe>
                    </div>

                    <span id='create-response4'></span><br>
                    <a  onclick="visibility(['create_3', 'create_4']);" style="float:left;">Previous</a>
                    <a  onclick="form_2();" style="float:right;">Next</a>
                </div>

                <!-- box 4-->
                <div id="create_5" style="display:none; height: 620px" >
                    <h4> Preview Info</h4><br>
                    <strong>Event Name :</strong>
                    <span id="p_eventname" ></span><br><br>
                    <img alt="eventimage" id="p_eventimage" src="" width="300"><br><br>
                    <strong>Description :</strong>
                    <span id="p_description" ></span><br><br>
                    <strong>Date:</strong>
                    <span id="p_date" ></span>
                    <strong>Time:</strong>
                    <span id="p_time" ></span><br><br>
                    <strong>Club:</strong>
                    <span id="p_club" ></span>
                    <strong>Location:</strong>
                    <span id="p_location" ></span><br><br>
                    <strong>Street Address :</strong>
                    <span id="p_address" ></span>
                    <strong>Post-Code:</strong>
                    <span id="p_postcode" ></span><br><br>
                    <strong>Price: </strong>
                    <span id="p_price" ></span>
                    <strong>Number of Tables: </strong>
                    <span id="p_tables"></span><br><br>
                    <strong>Promoters:</strong><br><br>
                    <span id="p_promoters"></span><br><br>

                    <span id='create-response5'></span><br>
                    <a id="preview_previous"  onclick="visibility(['create_3', 'create_4']);" style="float:left;" >Previous</a>
                    <a id="preview_submit"  onclick="add_event();" style="float:right;">Submit</a>
                </div>
            </div>
            <!-- The Modal -->
            <div id="myModal" class="mesage-box">
                <!-- Modal content -->
                <div class="mesage-box-content">
                    <button onclick="message_box('NAN')">&times;</button>
                    <p id="message-box">Some text in the Modal..</p>
                </div>
            </div>
        </div>

    </center>
</body>
</html>
